{"version":3,"sources":["../../src/components/accordion.js"],"names":["Selectors","DATA_ACCORDION","DATA_ACCORDION_ROW","DATA_VISIBLE","DATA_TARGET","DATA_TOGGLE_MULTIPLE","DATA_PARENT","ARIA_EXPANDED","ARIA_CONTROLS","ARIA_HIDDEN","ARIA_LABELLEDBY","TABINDEX","Events","CLICK","KEYDOWN","Messages","NO_VISIBLE_ERROR","id","NO_ROW_ERROR","NO_HEADER_ID_ERROR","NO_PARENT_ERROR","NO_CONTENT_ERROR","Accordion","_render","bind","_accordionButtons","_accordionContentsAttr","_accordionContents","_activeContainer","_activeButton","_activeAccordionRowId","_activeRowAttr","_activeRow","_activeContainerId","_activeContainerAttr","_activeContent","_activeButtonExpandState","_activeContentHiddenState","_headerLevels","accordionButtonSelector","_getPossibleAccordionButtonAttrs","getElements","length","forEach","button","_setupAccordion","addEventListener","removeEventListener","buttonId","getAttribute","document","getElementById","console","error","buttonContent","accordionRowAttr","_getAccordionRowAttr","querySelector","accordionRow","buttonHeaderAttr","_getPossibleAccordionHeaderAttrs","buttonHeader","buttonContentChildren","getFocusableElements","setAttribute","contentShouldExpand","style","maxHeight","scrollHeight","element","attr","map","num","join","event","preventDefault","target","NO_ACCORDION_ERROR","accordionButtonState","_closeAllIfToggleable","_toggleSelectedAccordion","hasAttribute","allContentAttr","allRows","allContent","allButtons","content","_toggleAttributeInCollection","activeContentBlock","value","elements","attributeName","currentValue","newValue","Utils"],"mappings":"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","sourcesContent":["\"use strict\"\n\nimport Utils from \"../utils\"\n\nconst Selectors = {\n  // unique\n  DATA_ACCORDION: \"data-accordion\",\n  DATA_ACCORDION_ROW: \"data-accordion-row\",\n  // common\n  DATA_VISIBLE: \"data-visible\",\n  DATA_TARGET: \"data-target\",\n  DATA_TOGGLE_MULTIPLE: \"data-toggle-multiple\",\n  DATA_PARENT: \"data-parent\",\n  // accessibility\n  ARIA_EXPANDED: \"aria-expanded\",\n  ARIA_CONTROLS: \"aria-controls\",\n  ARIA_HIDDEN: \"aria-hidden\",\n  ARIA_LABELLEDBY: \"aria-labelledby\",\n  TABINDEX: \"tabindex\",\n}\n\nconst Events = {\n  CLICK: \"click\",\n  KEYDOWN: \"keydown\",\n}\n\nconst Messages = {\n  NO_VISIBLE_ERROR: id =>\n    `Could not find parent with [data-visible] attribute associated with [data-target='${id}'].`,\n  NO_ROW_ERROR: id => `Could not find [data-accordion-row] associated with ${id}.`,\n  NO_HEADER_ID_ERROR: id => `Could not find header tag associated with [data-target='${id}'].`,\n  NO_PARENT_ERROR: id => `Could not find [data-parent] associated with [data-target='${id}'].`,\n  NO_CONTENT_ERROR: id =>\n    `Could not find accordion content block with [id] ${id} associated with [data-target='${id}'].`,\n}\n\n/**\n * Accordion component class.\n * @module Accordion\n * @requires Utils\n */\nexport default class Accordion extends Utils {\n  constructor() {\n    super()\n\n    // events\n    this._render = this._render.bind(this)\n\n    // all accordions\n    this._accordionButtons = []\n    this._accordionContentsAttr = \"\"\n    this._accordionContents = []\n\n    // active accordion\n    this._activeContainer = {}\n    this._activeButton = {}\n    this._activeAccordionRowId = \"\"\n    this._activeRowAttr = \"\"\n    this._activeRow = \"\"\n    this._activeContainerId = \"\"\n    this._activeContainerAttr = \"\"\n    this._activeContent = {}\n    this._activeButtonExpandState = \"\"\n    this._activeContentHiddenState = \"\"\n\n    // other data\n    this._headerLevels = [1, 2, 3, 4, 5, 6]\n  }\n\n  // public\n\n  /**\n   * Sets up accordion components and listens to buttons for events.\n   * Begin listening to [data-accordion-button] elements\n   */\n  start() {\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(\n      `[${Selectors.DATA_ACCORDION}]`,\n    )\n    this._accordionButtons = this.getElements(accordionButtonSelector)\n\n    if (this._accordionButtons.length) {\n      this._accordionButtons.forEach(button => {\n        this._setupAccordion(button)\n        button.addEventListener(Events.CLICK, this._render)\n      })\n    }\n  }\n\n  /**\n   * Stop listening to accordion button events.\n   */\n  stop() {\n    this._accordionButtons.forEach(button => {\n      button.removeEventListener(Events.CLICK, this._render)\n    })\n  }\n\n  // private\n\n  /**\n   * Add initial attributes to accordion elements.\n   * @param {Element} button - A button element that triggers an accordion.\n   */\n  _setupAccordion(button) {\n    const buttonId = button.getAttribute(Selectors.DATA_TARGET)\n\n    if (!document.getElementById(buttonId)) {\n      return console.error(Messages.NO_CONTENT_ERROR(buttonId))\n    }\n\n    const buttonContent = document.getElementById(buttonId)\n    const accordionRowAttr = this._getAccordionRowAttr(buttonId)\n\n    if (!document.querySelector(accordionRowAttr)) {\n      return console.error(Messages.NO_ROW_ERROR(buttonId))\n    }\n\n    const accordionRow = document.querySelector(accordionRowAttr)\n    const buttonHeaderAttr = this._getPossibleAccordionHeaderAttrs(accordionRowAttr)\n    const buttonHeader = this.getElements(buttonHeaderAttr)[0]\n\n    if (!buttonHeader || !buttonHeader.id) {\n      console.error(Messages.NO_HEADER_ID_ERROR(buttonId))\n    }\n\n    const buttonContentChildren = this.getFocusableElements(`#${buttonContent.id}`)\n\n    button.setAttribute(Selectors.ARIA_CONTROLS, buttonId)\n    buttonContent.setAttribute(Selectors.ARIA_LABELLEDBY, buttonHeader.id)\n\n    if (!accordionRow.getAttribute(Selectors.DATA_VISIBLE)) {\n      return console.error(Messages.NO_VISIBLE_ERROR(buttonId))\n    }\n\n    const contentShouldExpand = accordionRow.getAttribute(Selectors.DATA_VISIBLE)\n    if (contentShouldExpand === \"true\") {\n      buttonContent.style.maxHeight = `${buttonContent.scrollHeight}px`\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"true\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"false\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"0\")\n      })\n    } else {\n      button.setAttribute(Selectors.ARIA_EXPANDED, \"false\")\n      buttonContent.setAttribute(Selectors.ARIA_HIDDEN, \"true\")\n      buttonContentChildren.forEach(element => {\n        element.setAttribute(Selectors.TABINDEX, \"-1\")\n      })\n    }\n  }\n\n  /**\n   * Build a selector string to match possible accordion buttons\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible button selectors\n   */\n  _getPossibleAccordionButtonAttrs(attr) {\n    return this._headerLevels\n      .map(\n        num => `${attr} > [${Selectors.DATA_ACCORDION_ROW}] > h${num} [${Selectors.DATA_TARGET}]`,\n      )\n      .join(\", \")\n  }\n\n  /**\n   * Build a selector string to match possible accordion headers\n   * @param {String} attr - A unique attribute\n   * @return {String} - String of possible header selectors\n   */\n  _getPossibleAccordionHeaderAttrs(attr) {\n    return this._headerLevels.map(num => `${attr} > h${num}`).join(\", \")\n  }\n\n  /**\n   * Build a unique accordion row attribute selector.\n   * @param {String} id - An id value associated with a given Selectors.DATA_TARGET\n   * @return {String} - A unique accordion row selector\n   */\n  _getAccordionRowAttr(id) {\n    return `[${Selectors.DATA_ACCORDION_ROW}='${id}']`\n  }\n\n  /**\n   * Open accordion content associated with an accordion button.\n   * @param {Object} event - The event object\n   */\n  _render(event) {\n    event.preventDefault()\n\n    this._activeButton = event.target\n    this._activeAccordionRowId = this._activeButton.getAttribute(Selectors.DATA_TARGET)\n\n    this._activeRowAttr = this._getAccordionRowAttr(this._activeAccordionRowId)\n    this._activeRow = document.querySelector(this._activeRowAttr)\n\n    if (!this._activeButton.getAttribute(Selectors.DATA_PARENT)) {\n      return console.error(Messages.NO_PARENT_ERROR(this._activeAccordionRowId))\n    }\n\n    this._activeContainerId = this._activeButton.getAttribute(Selectors.DATA_PARENT)\n    this._activeContainerAttr = `[${Selectors.DATA_ACCORDION}='${this._activeContainerId}']`\n\n    if (!document.querySelector(this._activeContainerAttr)) {\n      return console.error(Messages.NO_ACCORDION_ERROR(this._activeContainerId))\n    }\n\n    this._activeContainer = document.querySelector(this._activeContainerAttr)\n    this._activeContent = document.getElementById(this._activeAccordionRowId)\n\n    const accordionButtonState = this._activeRow.getAttribute(Selectors.DATA_VISIBLE)\n\n    this._activeButtonExpandState = accordionButtonState === \"true\" ? \"false\" : \"true\"\n    this._activeContentHiddenState = this._activeButtonExpandState === \"false\" ? \"true\" : \"false\"\n\n    this._closeAllIfToggleable()\n    this._toggleSelectedAccordion()\n  }\n\n  /**\n   * If toggling multiple rows at once isn't enabled, close all rows except the selected one.\n   * This ensures the selected one can be closed if it's already open.\n   */\n  _closeAllIfToggleable() {\n    if (this._activeContainer.hasAttribute(Selectors.DATA_TOGGLE_MULTIPLE)) return\n\n    const allContentAttr = `${this._activeContainerAttr} [${Selectors.ARIA_HIDDEN}]`\n    const allRows = this.getElements(`${this._activeContainerAttr} [${Selectors.DATA_VISIBLE}]`)\n    const allContent = this.getElements(allContentAttr)\n\n    const accordionButtonSelector = this._getPossibleAccordionButtonAttrs(this._activeContainerAttr)\n    const allButtons = this.getElements(accordionButtonSelector)\n\n    allContent.forEach(content => {\n      if (content !== this._activeContent) content.style.maxHeight = null\n    })\n\n    this.getFocusableElements(allContentAttr).forEach(element => {\n      element.setAttribute(Selectors.TABINDEX, \"-1\")\n    })\n\n    this._toggleAttributeInCollection(allRows, Selectors.DATA_VISIBLE, \"true\", \"false\")\n    this._toggleAttributeInCollection(allButtons, Selectors.ARIA_EXPANDED, \"true\", \"false\")\n    this._toggleAttributeInCollection(allContent, Selectors.ARIA_HIDDEN, \"false\", \"true\")\n  }\n\n  /**\n   * Toggle the currently selected accordion button's content.\n   */\n  _toggleSelectedAccordion() {\n    this._activeRow.setAttribute(Selectors.DATA_VISIBLE, this._activeButtonExpandState)\n    this._activeButton.setAttribute(Selectors.ARIA_EXPANDED, this._activeButtonExpandState)\n    this._activeContent.setAttribute(Selectors.ARIA_HIDDEN, this._activeContentHiddenState)\n\n    const activeContentBlock = `#${this._activeAccordionRowId}`\n    this.getFocusableElements(activeContentBlock).forEach(element => {\n      const value = this._activeButtonExpandState === \"true\" ? \"0\" : \"-1\"\n      element.setAttribute(Selectors.TABINDEX, value)\n    })\n\n    if (this._activeContent.style.maxHeight) {\n      this._activeContent.style.maxHeight = null\n    } else {\n      this._activeContent.style.maxHeight = `${this._activeContent.scrollHeight}px`\n    }\n  }\n\n  /**\n   * Toggles a single attribute of a series of elements.\n   * @param {Array} elements - An array of elements to be operated on.\n   * @param {String} attributeName - An attribute to be changed.\n   * @param {String} currentValue - The current value of attributeName\n   * @param {String} newValue - The new value of attributeName\n   */\n  _toggleAttributeInCollection(elements, attributeName, currentValue, newValue) {\n    elements.forEach(element => {\n      if (element.hasAttribute(attributeName, currentValue)) {\n        element.setAttribute(attributeName, newValue)\n      }\n    })\n  }\n}\n"],"file":"accordion.js"}